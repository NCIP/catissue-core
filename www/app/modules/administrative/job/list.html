<div>
  <div os-page-header>
    <h3>
      <span translate="jobs.list">Scheduled Jobs</span>
    </h3>

    <div class="os-btns right">
      <button show-if-allowed="jobResource.createOpts" class="primary" 
        title="{{'jobs.tooltip.create_job' | translate}}" ui-sref="job-addedit({jobId: ''})">
        <span class="fa fa-plus"></span>
        <span translate="common.buttons.create">Create</span>
      </button>
      <button class="default" os-right-drawer-toggle title="{{'job.tooltip.search_jobs' | translate}}">
        <span class="fa fa-search"></span>
        <span translate="common.buttons.search">Search</span>
      </button>
    </div>
  </div>

  <div class="container">
    <div class="os-table">
      <div class="os-table-head">
        <div class="row">
          <div class="col col-xs-5">
            <span translate="jobs.title">Title</span>
          </div>
          <div class="col col-xs-2">
            <span translate="jobs.created_by">Created By</span>
          </div>
          <div class="col col-xs-2">
            <span translate="jobs.type">Job Type</span>
          </div>
          <div class="col col-xs-2">
            <span translate="jobs.last_run_on">Last Run On</span>
          </div>
          <div class="col col-xs-1">
            <span>&nbsp;</span>
          </div>
        </div>
      </div>
      <div class="os-table-body">
        <div class="row" ng-repeat="job in jobs">
          <div class="col col-xs-5">
            <a ng-click="executeJob(job)">
              <span>#{{job.id}} {{job.name}}</span>
            </a>
          </div>
          <div class="col col-xs-2">
            <span>{{job.createdBy.firstName}} {{job.createdBy.lastName}}</span>
          </div>
          <div class="col col-xs-2">
            <span>{{'jobs.types.' + job.type | translate}}</span>
          </div>
          <div class="col col-xs-2" ng-switch on="!!job.lastRunOn">
            <span ng-switch-when="true">{{job.lastRunOn | date: global.dateTimeFmt}}</span>
            <span ng-switch-default translate="common.na">Not Available</span>
          </div>
          <div class="col col-xs-1 os-more-options">
            <div dropdown>
              <button class="btn btn-xs btn-default dropdown-toggle">
                <span class="fa fa-ellipsis-v"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right">
                <li show-if-allowed="jobResource.updateOpts">
                  <a ui-sref="job-addedit({jobId: job.id})">
                    <i class="fa fa-pencil"></i>
                    <span translate="jobs.edit_job"></span>
                  </a>
                </li>
                <li show-if-allowed="jobResource.deleteOpts">
                  <a ng-click="deleteJob(job)">
                    <i class="fa fa-trash"></i>
                    <span translate="jobs.delete_job"></span>
                  </a>
                </li>
                <li>
                  <a ui-sref="job-run-log({jobId: job.id})">
                    <i class="fa fa-bars"></i>
                    <span translate="jobs.view_job_runs"></span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div os-right-drawer ng-include="'modules/administrative/job/search.html'"> 
  </div>
</div>
