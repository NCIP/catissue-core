
<div>
  <div os-page-header>
    <h3>
      <span translate="user.list">Users</span>
    </h3>
    <div class="os-btns right">
      <button show-if-allowed="userResource.createOpts" class="primary" title="{{'user.tooltip.add' | translate}}"
        ui-sref="user-addedit({userId: ''})">
        <span class="fa fa-plus"></span>
        <span translate="common.buttons.create">Create</span>
      </button>
      <div show-if-allowed="userResource.createOpts" dropdown class="inline">
        <button class="default dropdown-toggle">
          <span translate="common.buttons.import">Import</span>
          <span class="fa fa-caret-down"></span>
        </button>
        <ul class="dropdown-menu dropdown-menu-right">
          <li>
            <a ui-sref="user-import({objectType: 'user'})">
              <i class="fa fa-user"></i>
              <span translate="user.list">Users</span>
            </a>
          </li>
          <li>
            <a ui-sref="user-import({objectType: 'userRoles'})">
              <i class="fa fa-lock"></i>
              <span translate="user.user_roles">User Roles</span>
            </a>
          </li>
          <li>
            <a ui-sref="user-import-jobs">
              <i class="fa fa-table"></i>
              <span translate="common.view_jobs">View Jobs</span>
            </a>
          </li>
        </ul>
      </div>
      <button class="default" os-right-drawer-toggle title="{{'user.tooltip.search' | translate}}">
        <span class="fa fa-search"></span>
        <span translate="common.buttons.search">Search</span>
      </button>
    </div>
  </div>
    
  <div class="os-cards">
    <div class="os-card" ng-repeat="user in users" ng-click="showUserOverview(user)">
      <h4>
        <a title="{{'user.tooltip.view_details' | translate}}" ui-sref=".overview(user)">
          <span>{{user | osUserDisplayName}}</span>
        </a>
      </h4>
      <!--TODO insert email address here after getting it from backend  -->
      <h5 title="{{'user.email_address' | translate}}">{{user.loginName}}</h5>

      <!--TODO insert last login time here after getting it from backend  -->
      <p title="{{'user.tooltip.last_login' | translate}}">{{user.lastLogin}}</p>
      
      <div class="stats">
        <div class="stat col-xs-6" title="{{'user.tooltip.cp_count' | translate}}">
          <span class="fa fa-calendar"></span>
          <span>{{(user.cpCount || 0 )| number: 0}}</span>
        </div>
        <div class="stat col-xs-6" title="{{'user.tooltip.user_since' | translate}}">
          <span class="fa fa-history"></span>
          <span ng-if="!!user.creationDate">
            {{user.creationDate | date: 'yyyy'}}
          </span>
          <span ng-if="!user.creationDate" translate="common.na">
          </span>
        </div>
      </div> 
    </div>
  </div>

  <div os-right-drawer ng-include="'modules/administrative/user/search.html'"></div>
</div>
